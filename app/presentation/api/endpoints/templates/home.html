<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç–∞—Ç—å–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        /* –ù–û–í–´–ô –ö–û–î: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–µ–≥–æ—Å—è –ø–æ–∏—Å–∫–∞ */
        .search-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        /* –ù–û–í–´–ô –ö–û–î: –û–±—ë—Ä—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ - –Ω–∞—á–∏–Ω–∞–µ—Ç –º–∞–ª–µ–Ω—å–∫–æ–π (50px) */
        .search-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            background: white;
            border-radius: 50px;
            padding: 5px;
            transition: all 0.5s ease;
            width: 50px;
            height: 50px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        /* –ù–û–í–´–ô –ö–û–î: –ö–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∞—Å—Å 'active', —à–∏—Ä–∏–Ω–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è */
        .search-wrapper.active {
            width: 400px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
        }
        
        /* –ù–û–í–´–ô –ö–û–î: –ö–Ω–æ–ø–∫–∞ —Å –∏–∫–æ–Ω–∫–æ–π –ø–æ–∏—Å–∫–∞ */
        .search-icon-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.4s ease;
            z-index: 2;
        }
        
        .search-icon-btn:hover {
            transform: scale(1.1);
        }
        
        /* –ù–û–í–´–ô –ö–û–î: –ü–æ–ª–µ –≤–≤–æ–¥–∞ - –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ–≤–∏–¥–∏–º–æ–µ (opacity: 0) */
        .search-input {
            border: none;
            outline: none;
            padding: 0 15px;
            font-size: 14px;
            width: 100%;
            opacity: 0;
            transition: opacity 0.5s ease 0.2s;
            background: transparent;
        }
        
        /* –ù–û–í–´–ô –ö–û–î: –ö–æ–≥–¥–∞ wrapper –∞–∫—Ç–∏–≤–µ–Ω, –ø–æ–ª–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∏–¥–∏–º—ã–º */
        .search-wrapper.active .search-input {
            opacity: 1;
        }
        
        /* –ù–û–í–´–ô –ö–û–î: –ö–Ω–æ–ø–∫–∞ "–ù–∞–π—Ç–∏" - —Ç–æ–∂–µ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ–≤–∏–¥–∏–º–∞ */
        .search-submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.7s ease 0.3s;
            flex-shrink: 0;
        }
        
        /* –ù–û–í–´–ô –ö–û–î: –ü–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ */
        .search-wrapper.active .search-submit-btn {
            opacity: 1;
        }
        
        .search-submit-btn:hover {
            transform: scale(1.05);
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            color: white;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 40px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .article-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .article-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }
        
        .article-header {
            border-bottom: 2px solid #667eea;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        
        .article-title {
            color: #333;
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .article-meta {
            display: flex;
            gap: 20px;
            color: #666;
            font-size: 0.9em;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .meta-item::before {
            content: "‚Ä¢";
            color: #667eea;
            font-weight: bold;
        }
        
        .article-content {
            color: #444;
            line-height: 1.8;
            font-size: 1.1em;
        }
        
        .author {
            color: #667eea;
            font-weight: 600;
        }
        
        .date {
            color: #888;
        }

        .add-article-container {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
        }

        .register-form {
            position: fixed;
            top: 100px;
            left: 20px;
            z-index: 1000;
        }

        .login-form {
            position: fixed;
            top: 180px;
            left: 20px;
            z-index: 1000;
        }

        .articles-user-form {
            position: fixed;
            top: 260px;
            left: 20px;
            z-index: 1000;
        }

        .article-user-form-active {
            position: fixed;
            top: 100px;
            left: 20px;
            z-index: 1000;
        }

        .add-article-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: white;
            color: #667eea;
            text-decoration: none;
            padding: 12px 25px;
            border-radius: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .add-article-button:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
        }

        .add-article-button:active {
            transform: translateY(0);
        }

        @media (max-width: 768px) {
            .add-article-container {
                position: static;
                margin-bottom: 10px;
                display: flex;
                justify-content: center;
            }
            
            .search-container {
                position: static;
                margin-bottom: 20px;
                display: flex;
                justify-content: center;
            }
            
            .search-wrapper.active {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="add-article-container">
        <a href="/articles/submit" class="add-article-button">
            ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—å—é
        </a>
    </div>

    {% if login %}
        <div class="register-form">
            <a href="/register" class="add-article-button">
                ‚ûï –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
            </a>
        </div>

        <div class="login-form">
            <a href="/login" class="add-article-button">
                ‚ûï –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
            </a>
        </div>
    {% endif %}    
    
    <div class="articles-user-form">
        <a href="/articles/user" class="add-article-button">
            ‚ûï –ú–æ–∏ —Å—Ç–∞—Ç—å–∏
        </a>
    </div>

    <!-- –ù–û–í–´–ô –ö–û–î: –†–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–π—Å—è –ø–æ–∏—Å–∫ -->
    <div class="search-container">
        <form action="/articles/search" method="get" class="search-form-wrapper">
            <div class="search-wrapper" id="searchWrapper">
                <button type="button" class="search-icon-btn" id="searchToggle">
                    üîç
                </button>
                <input 
                    type="text" 
                    name="query" 
                    class="search-input" 
                    id="searchInput"
                    placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..."
                >
                <button type="submit" class="search-submit-btn">
                    –ù–∞–π—Ç–∏
                </button>
            </div>
        </form>
    </div>

    <div class="container">
        <h1>üìù –°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π</h1>
        
        <div class="article-card">
            <div class="article-header">
                <h2 class="article-title">{{ articles.title }}</h2>
                <div class="article-meta">
                    <div class="meta-item">
                        <span class="author">{{ articles.author }}</span>
                    </div>
                    <div class="meta-item">
                        <span class="date">{{ articles.date_add }}</span>
                    </div>
                </div>
            </div>
            
            <div class="article-content">
                <p>{{ articles.content[0:200] }}</p>
                <a href="article/{{ articles.id }}">
                    –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é
                </a>
            </div>
        </div>
    </div>

    <!-- –ù–û–í–´–ô –ö–û–î: JavaScript –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –ø–æ–∏—Å–∫–∞ -->
    <script>
        // –®–ê–ì 1: –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∏–∑ HTML –ø–æ –∏—Ö ID
        // document.getElementById() - –Ω–∞—Ö–æ–¥–∏—Ç —ç–ª–µ–º–µ–Ω—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–º—É ID
        const searchToggle = document.querySelector('#searchToggle');  // –ö–Ω–æ–ø–∫–∞ —Å –∏–∫–æ–Ω–∫–æ–π üîç
        const searchWrapper = document.querySelector('#searchWrapper'); // –û–±—ë—Ä—Ç–∫–∞ –≤—Å–µ–≥–æ –ø–æ–∏—Å–∫–∞
        const searchInput = document.querySelector('#searchInput');     // –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞
        const listArticle = document.querySelector('.articles-user-form');
        const loginForm = document.querySelector('.login-form');

        if (!document.contains(loginForm)) {
            listArticle.classList.remove('articles-user-form');
            listArticle.classList.add('article-user-form-active')
        }

        // –®–ê–ì 2: –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—à–∞—Ç–µ–ª—å —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É
        // addEventListener('click', function) - "—Å–ª—É—à–∞–µ—Ç" –∫–ª–∏–∫–∏ –ø–æ –∫–Ω–æ–ø–∫–µ
        // –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫—É üîç, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è
        searchToggle.addEventListener('mouseover', () => {
            
            // –®–ê–ì 3: –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –∫–ª–∞—Å—Å 'active'
            // classList.toggle('active') - –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–ª–∞—Å—Å, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç, —É–±–∏—Ä–∞–µ—Ç –µ—Å–ª–∏ –µ—Å—Ç—å
            // –≠—Ç–æ –∫–∞–∫ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å —Å–≤–µ—Ç–∞: –Ω–∞–∂–∞–ª - –≤–∫–ª—é—á–∏–ª–æ—Å—å, –Ω–∞–∂–∞–ª –µ—â—ë —Ä–∞–∑ - –≤—ã–∫–ª—é—á–∏–ª–æ—Å—å
            searchWrapper.classList.toggle('active');
            
            // –®–ê–ì 4: –ï—Å–ª–∏ –∫–ª–∞—Å—Å 'active' —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å (–ø–æ–∏—Å–∫ —Ä–∞—Å–∫—Ä—ã–ª—Å—è)
            // classList.contains('active') - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –∫–ª–∞—Å—Å
            if (searchWrapper.classList.contains('active')) {
                
                // –®–ê–ì 5: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
                // focus() - –∫—É—Ä—Å–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä—ã–≥–∞–µ—Ç –≤ –ø–æ–ª–µ, –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –ø–µ—á–∞—Ç–∞—Ç—å
                searchInput.focus();
            }
        });

        // –®–ê–ì 6: –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∏—Å–∫–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        // –°–ª—É—à–∞–µ–º –∫–ª–∏–∫–∏ –ø–æ –≤—Å–µ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—É (–≤—Å–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ)
        document.addEventListener('mouseover', function(e) {
            
            // –®–ê–ì 7: –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–ª–∏–∫–Ω—É–ª–∏ –ª–∏ –í–ù–ï –ø–æ–∏—Å–∫–∞
            // e.target - —ç—Ç–æ —ç–ª–µ–º–µ–Ω—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –∫–ª–∏–∫–Ω—É–ª–∏
            // contains() - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —ç–ª–µ–º–µ–Ω—Ç –≤–Ω—É—Ç—Ä–∏ searchWrapper
            // ! - –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ (–ù–ï)
            // –ï—Å–ª–∏ –∫–ª–∏–∫–Ω—É–ª–∏ –ù–ï –ø–æ –ø–æ–∏—Å–∫—É - –∑–∞–∫—Ä—ã–≤–∞–µ–º –µ–≥–æ
            if (!searchWrapper.contains(e.target)) {
                searchWrapper.classList.remove('active'); // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å 'active'
            }
        });
    </script>
</body>
</html>